version: "3.1"
stories:
  # =============== GREETING & GOODBYE ===============
  - story: greet -> offer help
    steps:
      - intent: greet
      - action: utter_greet
      - action: utter_help_topics # jelaskan bot bisa bantu biaya, prodi, jadwal, syarat, dsb.

  - story: user says thanks
    steps:
      - intent: thank_you
      - action: utter_you_are_welcome

  - story: goodbye
    steps:
      - intent: goodbye
      - action: utter_goodbye

  # =============== QNA STATIS (AMBIL DARI t_qna) ===============
  - story: jalur pendaftaran (statis)
    steps:
      - intent: tanya_jalur_pendaftaran
      - action: action_answer_from_qna # ambil jawaban di t_qna berdasarkan intent

  - story: cara mendaftar (statis)
    steps:
      - intent: cara_mendaftar
      - action: action_answer_from_qna

  - story: syarat pendaftaran (statis)
    steps:
      - intent: tanya_syarat_pendaftaran
      - action: action_answer_from_qna

  - story: beasiswa (statis)
    steps:
      - intent: tanya_beasiswa
      - action: action_answer_from_qna

  - story: toefl (statis)
    steps:
      - intent: tanya_toefl
      - action: action_answer_from_qna

  - story: jadwal pendaftaran (statis)
    steps:
      - intent: tanya_jadwal_pendaftaran
      - action: action_answer_from_qna

  - story: jadwal ujian (statis)
    steps:
      - intent: tanya_jadwal_ujian
      - action: action_answer_from_qna

  - story: jadwal pengumuman (statis)
    steps:
      - intent: tanya_jadwal_pengumuman
      - action: action_answer_from_qna

  # =============== QUERY DINAMIS: BIAYA (t_biaya_pascasarjana) ===============
  - story: biaya kuliah lengkap (jenjang + prodi/varian tersedia)
    steps:
      - intent: tanya_biaya_kuliah
        entities:
          - jenjang: "Magister"
          - prodi: "Manajemen Teknologi"
      - slot_was_set:
          - jenjang: "Magister"
          - prodi: "Manajemen Teknologi"
      - action: action_query_biaya # SELECT biaya_label, spi, ipits FROM t_biaya_pascasarjana WHERE ...
      - action: utter_show_biaya_result

  - story: biaya kuliah – tanya balik jenjang dulu
    steps:
      - intent: tanya_biaya_kuliah
        entities:
          - prodi: "Teknik Informatika"
      - slot_was_set:
          - prodi: "Teknik Informatika"
      - action: utter_ask_jenjang # “Untuk jenjang apa? Magister atau Doktor?”
      - intent: inform
        entities:
          - jenjang: "Magister"
      - slot_was_set:
          - jenjang: "Magister"
      - action: action_query_biaya
      - action: utter_show_biaya_result

  - story: biaya kuliah – tanya balik prodi/varian program
    steps:
      - intent: tanya_biaya_kuliah
        entities:
          - jenjang: "Doktor"
      - slot_was_set:
          - jenjang: "Doktor"
      - action: utter_ask_prodi_or_program # “Untuk program apa? (contoh: Jalur Reguler dan Riset / PJJ Reguler / DMT)”
      - intent: inform
        entities:
          - prodi: "PJJ Reguler"
      - slot_was_set:
          - prodi: "PJJ Reguler"
      - action: action_query_biaya
      - action: utter_show_biaya_result

  # =============== QUERY DINAMIS: PRODI (t_prodi) ===============
  - story: daftar prodi pada fakultas tertentu
    steps:
      - intent: tanya_prodi_tersedia
      - action: utter_ask_fakultas_optional # kalau user belum menyebut fakultas, minta fakultas (opsional)
      - intent: inform
        entities:
          - fakultas: "Teknologi Elektro dan Informatika Cerdas"
      - slot_was_set:
          - fakultas: "Teknologi Elektro dan Informatika Cerdas"
      - action: action_list_prodi_by_fakultas # SELECT prodi FROM t_prodi WHERE fakultas=...

  - story: cari fakultas dari nama prodi
    steps:
      - intent: tanya_prodi_tersedia
        entities:
          - prodi: "Teknik Fisika"
      - slot_was_set:
          - prodi: "Teknik Fisika"
      - action: action_lookup_fakultas_by_prodi # SELECT fakultas FROM t_prodi WHERE prodi=...

  # =============== FALLBACK & CLARIFICATION ===============
  - story: fallback then clarify
    steps:
      - intent: nlu_fallback
      - action: utter_ask_clarify
      - intent: inform
      - action: action_route_after_clarify # arahkan ke action yang sesuai (qna atau db)
