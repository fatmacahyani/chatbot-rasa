version: "3.1"

rules:
  # ========== GREETING ==========
  - rule: greet the user
    steps:
      - intent: greet
      - action: utter_greet
      - action: utter_help_topics

  # ========== GOODBYE ==========
  - rule: say goodbye
    steps:
      - intent: goodbye
      - action: utter_goodbye

  # ========== THANK YOU ==========
  - rule: respond to thanks
    steps:
      - intent: thank_you
      - action: utter_you_are_welcome

  # ========== FALLBACK / KALIMAT TIDAK DIPAHAMI ==========
  - rule: handle fallback when NLU confidence is low
    steps:
      - intent: nlu_fallback
      - action: utter_ask_clarify

  # ========== TANYA BIAYA (DARI DATABASE) ==========
  # Removed conflicting slot-based rules - handled by stories instead

  # ========== TANYA PRODI ==========
  # Complex prodi queries handled by stories

  # ========== SIMPLE RULES FOR DIRECT QNA MAPPING ==========
  - rule: jawab masa studi
    steps:
      - intent: tanya_masa_studi
      - action: action_answer_from_qna

  - rule: jawab cuti
    steps:
      - intent: tanya_cuti
      - action: action_answer_from_qna

  - rule: jawab kegiatan mahasiswa
    steps:
      - intent: tanya_kegiatan_mahasiswa
      - action: action_answer_from_qna

  - rule: jawab asrama
    steps:
      - intent: tanya_asrama
      - action: action_answer_from_qna

  - rule: jawab biaya pendaftaran
    steps:
      - intent: tanya_biaya_pendaftaran
      - action: action_answer_from_qna

  - rule: jawab cara pembayaran
    steps:
      - intent: cara_pembayaran
      - action: action_answer_from_qna

  - rule: jawab double degree
    steps:
      - intent: tanya_double_degree
      - action: action_answer_from_qna

  - rule: jawab ipk minimum
    steps:
      - intent: tanya_ipk_minimum
      - action: action_answer_from_qna

  - rule: jawab periode pendaftaran
    steps:
      - intent: tanya_periode_pendaftaran
      - action: action_answer_from_qna

  - rule: jawab seleksi
    steps:
      - intent: tanya_seleksi
      - action: action_answer_from_qna

  - rule: jawab transfer
    steps:
      - intent: tanya_transfer
      - action: action_answer_from_qna

  # ========== ROUTE AFTER CLARIFY ==========
  - rule: route after clarify
    steps:
      - action: action_route_after_clarify
